<!doctype html>

<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>IPI - Cours sur la suite Elastic</title>
    
    <meta name="description" content="" />
    <meta name="author" content="Pierre-Julien VILLOUD" />


    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/bootstrap-4-navbar.css" rel="stylesheet" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <link href="css/idea.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />

    
</head>

<body class="impress-not-supported">

<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<nav class="navbar navbar-expand-lg navbar-light bg-light" id="my-navbar">
  <a class="navbar-brand" href="index.html">
    <img src="img/ipi.jpg" width="30" height="30" alt=""> Cours Elastic
  </a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="nav nav-pills mr-auto">
      
    </ul>
    <span class="navbar-text">
        <div class="btn-group" role="group" aria-label="Basic example">
            <form class="form-inline my-2 my-lg-0" onsubmit="search()">
              <div class="input-group">
                <input id="searchInput" class="form-control mr-2" type="search" placeholder="Rechercher" aria-label="Rechercher">
                <div class="input-group-append">
                  <span class="input-group-text" id="searchNb"></span>
                  <button class="btn btn-primary" type="submit"><i class="fa fa-icon fa-search"></i></button>
                </div>
                <div class="btn-group">
                  <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split ml-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-icon fa-gamepad"></i>
                  </button>
                  <div class="dropdown-menu">
                    <a class="dropdown-item" href="https://github.com/pjvilloud/ipi-elastic-ex" target="_blank">Lien vers le TP</a>
                    <div role="separator" class="dropdown-divider"></div>
                    <input type="text" id="elasticServer" value="http://localhost:9200" class="form-control" style="width: 100%;" placeholder="Nom d'utilisateur">
                    <input type="text" id="elasticUser" value="elastic" class="form-control" style="width: 100%;" placeholder="URL serveur Elastic">
                    <input type="password" id="elasticPwd" value="" class="form-control" style="width: 100%;" placeholder="Mot de passe">

                  </div>
                </div>
              </div>
            </form>
            &nbsp;
            <a class="btn btn-primary" href="mailto:pjvilloud@protonmail.com"><i class="fa fa-icon fa-envelope"></i></a>
            &nbsp;
            <a class="btn btn-primary" href="https://github.com/pjvilloud" target="_blank"><i class="fa fa-icon fa-github"></i></a>
            &nbsp;
            <a class="btn btn-primary" href="https://linkedin.com/pjvilloud" target="_blank"><i class="fa fa-icon fa-linkedin"></i></a>&nbsp;
            <a class="btn btn-primary" href="#" id="numSlide">1</a>
        </div>
    </span>
  </div>
</nav>
<div class="progress">
  <div id="progress" class="progress-bar" style="width: 0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<div class="container-fluid" id="impress">

    <div id="accueil" class="step slide" data-rel-x="0" data-y=0>
        <div class="jumbotron jumbotron-fluid">
          <div class="container text-center">
            <h1 class="display-3">Bienvenue !</h1>
            <p class="lead">
                <h2>Pierre-Julien VILLOUD</h2>
                <div class="big-top-margin">
                    <img src="img/pjvilloud.jpg" class="img-bienvenue rounded mx-auto d-block" alt="Pierre-Julien VILLOUD">
                </div>
                <div class="big-top-margin">
                    <h3><i class="fa fa-icon fa-envelope-square"></i>&nbsp;<a href="mailto:pjvilloud@protonmail.com">pjvilloud@protonmail.com</a></h3>
                    <h3><i class="fa fa-icon fa-github-square"></i>&nbsp;<a href="https://github.com/pjvilloud" target="_blank">https://github.com/pjvilloud</a></h3>
                    <h3><i class="fa fa-icon fa-linkedin-square"></i>&nbsp;<a href="https://linkedin.com/pjvilloud" target="_blank">https://linkedin.com/pjvilloud</a></h3>
                    <h3><i class="fa fa-icon fa-globe"></i>&nbsp;<a href="http://pjvilloud.github.io" target="_blank">http://pjvilloud.github.io</a></h3>
                </div>
            </p>
          </div>
        </div>
    </div>
    
    <div id="intro" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Introduction</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Considérons quelques cas d'utilisation que l'on rencontre fréquemment dans les projets informatiques
            </div>
          </div>
          <div class="container small-font big-top-margin">
            <div class="row">
              <div class="col-sm-12">  
                <ul class="list-group">
                  <li class="list-group-item">Mise en place d'un moteur de recherche plus ou moins sophistiqué</li>
                  <li class="list-group-item">Surveillance technique et fonctionnelle d'applications en temps réel</li>
                  <li class="list-group-item">Détecter efficacement et solutionner rapidement des anomalies</li>
                </ul>
              </div>      
            </div>      
          </div>
          <div class="container-fluid big-top-margin">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Ces problématiques sont complexes et développer des outils en interne permettant de les adresser serait très coûteux.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="intro-elastic" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">La suite Elastic</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Pour répondre à chacun de ces cas d'utilisation, nous parlerons de la suite Elastic, comprenant (entre autres...) <strong>Elasticsearch</strong>, <strong>Logstash</strong>, <strong>Kibana</strong> et <strong>Beats</strong>.
            </div>
          </div>
          <div class="container-fluid small-font">
            <div class="row">
              <div class="col-sm-12">
                <img src="img/elastic.png" alt="" height="500">
              </div>
            </div>      
          </div>
          <div class="container-fluid">
            <div class="alert alert-warning small-font" role="alert">
                <i class="fa fa-icon fa-danger-sign"></i>&nbsp;L'objectif de ce cours n'est pas de vous présenter en détails l'ensemble des fonctionnalités (cela demanderait plus de temps !), mais de vous montrer les principes de fonctionnement et quelques cas d'utilisation concrets afin de mieux appréhender ces outils.
            </div>
          </div>
        </div>
      </div>
    </div>    

    <div id="intro-history" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Historique</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Quelques repères autour des produits et solutions présentés dans ce cours.
            </div>
          </div>
          <div class="container-fluid small-font">
            <div class="row">
              <div class="col">
                <ul class="list-group">
                  <li class="list-group-item">
                    <h4>2000</h4>
                    <p class="text-justify">Shay Banon crée un moteur de recherche pour l'aider à s'y retrouver dans sa longue liste de recettes de cuisine. <em>Compass</em>, puis <em>Elasticsearch</em> est développé (à partir d'Apache Lucene). La solution est rapidement adoptée par une communauté grandissante.</p>
                  </li>
                  <li class="list-group-item">
                    <h4>2012</h4>
                    <p class="text-justify">Fondation d'Elasticsearch Inc. (qui deviendra ensuite simplement Elastic) et association d'<em>Elasticsearch</em> avec l'agrégateur de log <em>Logstash</em> et l'outil de visualisation <em>Kibana</em> pour donner la stack <em>ELK</em>.</p>
                  </li>
                  <li class="list-group-item">
                    <h4>2015</h4>
                    <p class="text-justify">Harmonisation des développements et des numéros de version. Intégration de Beats. Déploiement du SaaS Elastic Cloud sur AWS</p>
                  </li>
                  <li class="list-group-item">
                    <h4>2017-2018</h4>
                    <p class="text-justify">Création d'Elastic Cloud Entreprise, la solution SaaS interne d'Elastic. Introduction en bourse de la société Elastic.</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Le moteur de recherche</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;A l'heure du Big Data, la recherche est un enjeu très important et les recherches <em>simples</em> ne sont plus suffisantes.
            </div>
          </div>
          <div class="container small-font little-top-margin">
            <div class="row">
              <div class="col-sm-12">  
                <div id="carouselExampleControls" class="carousel slide" data-interval="false" data-ride="carousel">
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <h3>Il faut pouvoir rechercher <strong>rapidement</strong> dans un ensemble de données conséquent et varié. </h3>
                      <img src="img/rechercherapide.png">
                    </div>
                    <div class="carousel-item">
                      <h3>Il faut pouvoir rechercher <strong>approximativement</strong> et proposer des corrections automatiques.</h3>
                      <img src="img/recherchecorrection.png">
                    </div>
                    <div class="carousel-item">
                      <h3>Il faut pouvoir <strong>trier</strong> selon divers critères des résultats avec une notion de <strong>pertinence</strong>. </h3>
                      <img src="img/recherchepertinence.png">
                    </div>
                    <div class="carousel-item">
                      <h3>Il faut pouvoir <strong>filtrer</strong> ou <strong>regrouper</strong> les résultats. </h3>
                      <img src="img/recherchefacettes.png">
                    </div>
                    <div class="carousel-item">
                      <h3>Il faut pouvoir <strong>proposer</strong> des <strong>suggestions</strong> pour améliorer la recherche. </h3>
                      <img src="img/rechercheautocomplete.PNG">
                    </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>
              </div>      
            </div>      
          </div>
        </div>
      </div>
    </div>

    <div id="search-elastic" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Présentation d'Elasticsearch</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<em>Elasticsearch</em> est un moteur de recherche et d'analyse de texte Open Source basé sur le moteur de recherche <em>Apache Lucene</em>. Il est la partie centrale de la suite <em>Elastic</em>. Il est également parmi les moteurs de base de données NoSql les plus populaires.
            </div>
          </div>
          <div class="container small-font text-left big-top-margin">
            <img src="img/Elasticsearch.png" width="1000">
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font big-top-margin" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<em>Elasticsearch</em> fournit un ensemble de services web REST permettant d'intéragir avec lui et fonctionne en <em>cluster</em>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-concepts" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Concepts</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<em>Elasticsearch</em> est un moteur de recherche riche en fonctionnalités mais relativement complexe. L'objectif ici est de comprendre les concepts clés permettant de l'utiliser dans le cadre de la suite <em>Elastic</em>.
            </div>
          </div>
          <div class="container small-font text-center big-top-margin">
            <img src="img/elasticconcepts.png">
          </div>
          <div class="container-fluid big-top-margin">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Voyons en détail chacun de ces concepts. 
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-concepts-root" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Document</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Un <strong>document</strong> représente les données que l'on souhaite stocker, et sur lesquelles nous effectuerons nos recherches. C'est l'équivalent d'une <em>ligne</em> d'une table d'un SGBDR.
            </div>
          </div>
          <div class="container small-font text-left">
            <pre>
              <code class="json">{
  "titre" : "Elasticsearch: The Definitive Guide",
  "auteurs": ["Clinton Gormley", "Zachary Tong"],
  "formats": [
    {
      "type": "Kindle",
      "prix": 24.69
    },
    {
      "type": "Broché",
      "prix": 32.84
    }   
  ]          
}</code></pre>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Un <strong>document</strong> est stocké sous forme d'un objet JSON. Les données à l'intérieur sont composées de champs <em>clé-valeur</em>. Ces valeurs peuvent être des types simples (chaîne de caractère, entier, décimal, booléen) ou être lui-même un objet JSON, ou encore un tableau.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-concepts-root-index" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Index</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les <strong>index</strong> sont l'équivalent des bases de données (pour les SGBDR). Ce sont des espaces permettant de stocker des <strong>documents</strong>.
            </div>
          </div>
          <div class="container small-font text-left">
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il est possible d'avoir plusieurs <strong>index</strong> dans un cluster mais chaque <strong>document</strong> est unique au sein d'un <strong>index</strong>. 
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-concepts-root-type" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Type</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les <strong>types</strong> de <strong>documents</strong> permettent de regrouper les <strong>documents</strong> similaires et permet de filtrer les <strong>documents</strong> en fonction de leur <strong>type</strong>.
            </div>
          </div>
          <div class="container small-font text-left">
          </div>
          <div class="container-fluid">
            <div class="alert alert-warning small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Petit à petit, les <strong>types</strong> sont supprimés d'<em>Elasticsearch</em>. La version 7 a déprécié les requêtes filtrant par <strong>type</strong> et cette fonctionnalité sera tout simplement supprimée dans la version 8.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-concepts-root-mapping" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Mapping</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Un <strong>mapping</strong> est défini au niveau d'un <strong>index</strong> (un seul <strong>mapping</strong> par <strong>index</strong>) et permet de configurer la structure des <strong>documents</strong> et le type des données stockées dans ces derniers. Cela correspond au schéma d'une table d'un SGBDR.
            </div>
          </div>
          <div class="container small-font text-left">
            <pre>
              <code class="json">{
    "books": {
        "mappings": {
            "properties": {
                "auteurs": { "type": "text", ... },
                "formats": {
                    "properties": {
                        "prix": { "type": "float" },
                        "type": { "type": "text", ... }
                    }
                },
                "titre": { "type": "text", ... }
            }
        }
    }
}</code></pre>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Un <strong>mapping</strong> est déduit automatiquement lors de l'indexation du premier <strong>document</strong> dans l'<strong>index</strong> (à partir des données du document) mais peut-être défini explicitement (préférable).
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-concepts-root-shard" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Shard</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il n'y a pas de limites concernant le nombre de documents que vous pouvez stocker dans un index. Afin d'éviter des plantages relatifs à des tailles d'index trop importantes, il est possible de diviser un index en plusieurs <strong>shards</strong> afin d'éventuellement les dispatcher sur les différents noeuds du cluster.
            </div>
          </div>
          <div class="container-fluid small-font text-left little-top-margin">
            <div class="border rounded border-5 border-info pt-3 pb-3">
              <div class="row">
                <div class="col text-center"><h1>Node 1</h1></div>
              </div>
              <div class="row">
                <div class="col">
                  <ul class="list-group rounded border border-3 border-warning">
                    <li class="list-group-item text-center">
                      <h3>Shard 1</h3>
                    </li>
                    <li class="list-group-item">
                      <pre><code class="json">{
  "titre": "Elasticsearch: The Definitive Guide",
  ...
}</code></pre>
                    </li>
                    <li class="list-group-item">
                      <pre><code class="json">{
  "titre": "Spring in Action",
  ...
}</code></pre>
                    </li>
                    <li class="list-group-item">
                      ...
                    </li>
                  </ul>
                </div>    
                <div class="col">
                  <ul class="list-group rounded border border-3 border-danger">
                    <li class="list-group-item text-center">
                      <h3>Shard 2</h3>
                    </li>
                    <li class="list-group-item">
  <pre><code class="json">{
  "titre": "Programming in Java",
  ...
}</code></pre>                  </li>
                    <li class="list-group-item">
  <pre><code class="json">{
  "titre": "Continuous Integration",
  ...
}</code></pre>                  </li>
                    <li class="list-group-item">...</li>
                  </ul>
                </div> 
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font little-top-margin" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il est possible de configurer manuellement le nombre de shards par index (par défaut à 1). L'augmentation du nombre de shards permet d'améliorer les performances de l'indexation.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-concepts-root-replica" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Replica</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Une <strong>replica</strong> est une <em>copie</em> d'un <strong>shard</strong>.
            </div>
          </div>
          <div class="container-fluid small-font text-left big-top-margin">
            <div class="row">
              <div class="border col rounded border-5 border-primary pt-3 pb-3">
                <div class="text-center"><h1>Node 1</h1></div>
                <ul class="list-group mb-2 rounded border border-3 border-warning">
                  <li class="list-group-item text-center">
                    <h3>Shard 1</h3>
                  </li>
                </ul>
                <ul class="list-group mb-2 rounded border border-3 border-danger">
                  <li class="list-group-item text-center">
                    <h3>Shard 2</h3>
                  </li>
                </ul>
                <ul class="list-group mb-2 rounded border border-3 border-info">
                  <li class="list-group-item bg-gray text-center">
                    <h3>Replica 3</h3>
                  </li>
                </ul>
                <ul class="list-group mb-2 rounded border border-3 border-success">
                  <li class="list-group-item bg-gray text-center">
                    <h3>Replica 4</h3>
                  </li>
                </ul>
              </div>
              <div class="border col rounded border-5 border-secondary pt-3 pb-3">
                <div class="text-center"><h1>Node 2</h1></div>
                <ul class="list-group mb-2 rounded border border-3 border-info">
                  <li class="list-group-item text-center">
                    <h3>Shard 3</h3>
                  </li>
                </ul>
                <ul class="list-group mb-2 rounded border border-3 border-success">
                  <li class="list-group-item text-center">
                    <h3>Shard 4</h3>
                  </li>
                </ul>
                <ul class="list-group mb-2 rounded border border-3 border-warning">
                  <li class="list-group-item bg-gray text-center">
                    <h3>Replica 1</h3>
                  </li>
                </ul>
                <ul class="list-group mb-2 rounded border border-3 border-danger">
                  <li class="list-group-item bg-gray text-center">
                    <h3>Replica 2</h3>
                  </li>
                </ul>
              </div> 
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font big-top-margin" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Afin d'éviter les pertes de données, les <strong>replicas</strong> doivent être stockées sur des noeuds différents de leur <strong>shard</strong> d'origine. Le nombre de <strong>replicas</strong> par <strong>shard</strong> est configurable. L'augmentation du nombre de replicas améliore les performances des recherches et la disponibilité de l'index.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-concepts-root-recap" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Récapitulatif</h1>
          <div class="container-fluid small-font text-left big-top-margin">
            <div class="row">
              <div class="col border col rounded border-5 border-dark pt-3 pb-3">
                <div class="text-center"><h1>Cluster</h1></div>
                <div class="row">
                  <div class="border col rounded border-5 border-primary m-3">
                    <div class="text-center"><h2>Node 1</h2></div>
                    <ul class="list-group mb-2 rounded border border-3 border-warning">
                      <li class="list-group-item text-center">
                        <h3>Index 1 : Shard 1</h3>
                      </li>
                      <li class="list-group-item text-center">
                        <span class="badge badge-primary">{ "title": "Elastic...", ... }</span>
                        <span class="badge badge-primary">{ "title": "Spring...", ... }</span>
                        <span class="badge badge-primary">...</span>
                      </li>
                    </ul>
                    <ul class="list-group mb-2 rounded border border-3 border-info">
                      <li class="list-group-item bg-gray text-center">
                        <h3>Index 1 : Replica 2</h3>
                      </li>
                      <li class="list-group-item text-center">
                        <span class="badge badge-secondary">{ "title": "Java...", ... }</span>
                        <span class="badge badge-secondary">{ "title": "Continuous...", ... }</span>
                        <span class="badge badge-secondary">...</span>
                      </li>
                    </ul>
                  </div>
                  <div class="border col rounded border-5 border-secondary m-3">
                    <div class="text-center"><h2>Node 2</h2></div>
                    <ul class="list-group mb-2 rounded border border-3 border-info">
                      <li class="list-group-item text-center">
                        <h3>Index 1 : Shard 2</h3>
                      </li>
                      <li class="list-group-item text-center">
                        <span class="badge badge-primary">{ "title": "Java...", ... }</span>
                        <span class="badge badge-primary">{ "title": "Continuous...", ... }</span>
                        <span class="badge badge-primary">...</span>
                      </li>
                    </ul>
                    <ul class="list-group mb-2 rounded border border-3 border-warning">
                      <li class="list-group-item bg-gray text-center">
                        <h3>Index 1 : Replica 1</h3>
                      </li>
                      <li class="list-group-item text-center">
                        <span class="badge badge-secondary">{ "title": "Elastic...", ... }</span>
                        <span class="badge badge-secondary">{ "title": "Spring...", ... }</span>
                        <span class="badge badge-secondary">...</span>
                      </li>
                    </ul>
                  </div> 
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-communication" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Communication</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;La manière la plus simple de communiquer avec un cluster Elasticsearch est via son <strong>interface REST</strong>. Accessible par défaut sur le port <code>9200</code>, elle permet de configurer le cluster et ses différents noeuds, d'effectuer toutes les opérations de CRUD sur les index ou les documents et d'effectuer tout type de recherche.
            </div>
          </div>
          <div class="container big-top-margin">
            <img src="img/restapis.png">
          </div>
          <div class="container-fluid big-top-margin">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;De nombreux clients Elasticsearch existent (notamment un présent dans Kibana) permettant de rendre l'interface plus accessible. La documentation complète de l'API est disponible <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/rest-apis.html" target="_blank">ici</a>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-indexer" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Indexer</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;L'<strong>indexation</strong> consiste à ajouter un document ou plusieurs documents dans un index. 
            </div>
          </div>
          <div class="container small-font big-top-margin">
            <ul class="list-group">
              <li class="list-group-item">Création/Affichage/Suppression d'index</li>
              <li class="list-group-item">Indexation/Mise à jour/Suppression d'un document</li>
              <li class="list-group-item">Opération sur plusieurs documents</li>
            </ul>
          </div>
          <div class="container-fluid big-top-margin">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Pour exécuter les requêtes présentées, il est possible d'utiliser n'importe quel client REST (Postman par exemple) ou d'utiliser ce site en renseignant l'URL du serveur Elasticsearch dans le champ affiché au clic sur le bouton <i class="fa fa-icon fa-gamepad"></i> du menu (par défaut à <code>http://localhost:9200</code>. Il est possible d'y indiquer le nom d'utilisateur et le mot de passe le cas échéant).
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-indexer-root" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">CR(U)D sur les index</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;L'<strong>indexation</strong> consiste à ajouter un document dans un index. Pour cela, commençons par créer un index en exécutant une requête <code>PUT /[index_name]</code>.
            </div>
          </div>
          <div class="container-fluid small-font text-left">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('PUT', '/people', 'createIndexPeopleBody', 'createIndexPeopleResponse')">Exécuter</button></div>
                    Requête HTTP <code>PUT /people</code><br>
                    Corps de la requête (optionnel)<br>
                    <pre class="mb-0"><code class="json" id="createIndexPeopleBody">{
  "settings" : {
    "number_of_shards" : 1,
    "number_of_replicas" : 1
  },
  "mappings" : {
    "properties" : {
        "dateNaissance" : { 
          "type" : "date", 
          "format": "dd/MM/yyyy" 
        },
        "sexe" : { "type": "keyword" },
        "departementNaissance" : { "type": "keyword" }
    }
  }
}</code></pre></li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="createIndexPeopleResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Toutes les possibilités sur l'API <code>index</code> <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices.html" target="_blank">ici</a> et les informations sur les types des champs <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-types.html" target="_blank">ici</a>. Pour supprimer un index, il suffit d'exécuter une requête <code>DELETE /[index_name]</code>. <button class="btn btn-danger" onclick="executeRest('DELETE', '/people', null, 'createIndexPeopleResponse')">Exécuter</button> <br>
                Pour afficher un index, il suffit d'exécuter une requête <code>GET /[index_name]</code>. <button class="btn btn-primary" onclick="executeRest('GET', '/people', null, 'createIndexPeopleResponse')">Exécuter</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-indexer-root-document" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">CRUD sur les documents</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Pour ajouter un document à un index, on utilise une requête <code>POST /[index_name]/_doc/</code> (identifiant généré automatiquement, à éviter !) ou <code>PUT /[index_name]/_doc/[id]</code> ou encore <code>PUT /[index_name]/_create/[id]</code> ou <code>POST /[index_name]/_create/[id]</code>.
            </div>
          </div>
          <div class="container-fluid small-font text-left">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('PUT', '/people/_doc/1', 'indexDocPeopleBody', 'indexDocPeopleResponse')">Exécuter</button>
                      <button class="btn btn-secondary" onclick='(function (){
                        $("#indexDocPeopleBody").text(JSON.stringify({
                          "nom": "Villoud",
                          "prenom": "Pierre-Julien",
                          "sexe": "M",
                          "dateNaissance": "30/04/1987",
                          "departementNaissance": "38",
                          "bio": "I worked for 7 years for the company Worldline in Lyon as a Java and FrontEnd lead developper. I am working as a freelance now and I teach at IPI"
                        }, null, 2));
                        hljs.highlightBlock(document.getElementById("indexDocPeopleBody"));

                      })();return false;'>Modifier</button>
                    </div>
                    Requête HTTP <code>PUT /people/_doc/1</code><br>
                    <pre><code class="json" id="indexDocPeopleBody">{
  "nom": "V",
  "prenom": "Pierre",
  "sexe": "M",
  "dateNaissance": "30/04/1987",
  "departementNaissance": "38",
  "bio": "I worked for 7 years for the company Worldline in Lyon as a Java and FrontEnd lead developper. I am working as a freelance now and I teach at IPI"
}</code></pre></li>
                </ul>
                <p>Pour modifier un document, il suffit de le réindexer, c'est-à-dire exécuter une nouvelle requête <code>PUT /[index_name]/_doc/[id]</code>. Le numéro de version est incrémenté et le contenu du document remplacé. Attention à ne pas utiliser la méthode <code>POST /[index_name]/_doc/</code> qui crée systématiquement un nouveau document (avec un nouvel id). On peut utiliser <code>POST /[index_name]/_update/[id]</code></p>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="indexDocPeopleResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Toutes les possibilités sur l'API <code>document</code> <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs.html" target="_blank">ici</a>. Pour supprimer un document, il suffit d'exécuter une requête <code>DELETE /[index_name]/_doc/[id]</code>. <button class="btn btn-danger" onclick="executeRest('DELETE', '/people/_doc/1', null, 'indexDocPeopleResponse')">Exécuter</button> <br>
                Pour afficher un document, il suffit d'exécuter une requête <code>GET /[index_name]/_doc/[id]</code>. <button class="btn btn-primary" onclick="executeRest('GET', '/people/_doc/1', null, 'indexDocPeopleResponse')">Exécuter</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-indexer-root-multidocument" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Opérations sur plusieurs documents</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il est possible d'effectuer les opérations vues précédemment sur plusieurs documents en une seule requête.
            </div>
          </div>
          <div class="container-fluid small-font text-left">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_mget', 'multiDocPeopleBody', 'multiDocPeopleResponse')">Exécuter</button>
                    </div>
                    Récupérer plusieurs documents <code>GET /people/_mget</code><br>
                    <pre><code class="json" id="multiDocPeopleBody">{ "ids": ["1", "1000", "1001"] }</code></pre></li>
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/_bulk', 'multiDocPeopleBody2', 'multiDocPeopleResponse')">Exécuter</button>
                    </div>
                    Indexer plusieurs documents <code>POST /_bulk</code><br>
                    <pre><code class="json" id="multiDocPeopleBody2">{ "index" : { "_index" : "people", "_id" : "1000" } }
{ "nom": "Doe", "prenom": "John", "sexe": "M", "dateNaissance": "01/01/1970", "departementNaissance": "01", "bio": "I don't know anything about myself except the fact that I am a man." }
{ "index" : { "_index" : "people", "_id" : "1001" } }
{ "nom": "Doe", "prenom": "Jane", "sexe": "F", "dateNaissance": "02/01/1970", "departementNaissance": "01", "bio": "I don't know anything about myself except the fact that I am a woman." }
</code></pre></li>
                  <li class="list-group-item">
                    Modification ou suppression en fonction d'une requête
                  </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="multiDocPeopleResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Toutes les possibilités sur l'API multi-document <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs.html" target="_blank">ici</a>, dans la rubrique <em>Multi-document APIs</em>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-rechercher" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Rechercher</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Voyons maintenant comment on peut effectuer des recherches en utilisant <strong>Query DSL</strong> et la requête <code>POST/GET /[index(s)]/_search</code>. <br>A noter qu'il est possible de ne spécifier aucun index, un seul index, ou une liste d'index séparés par des virgules.
            </div>
          </div>
          <div class="container-fluid small-font text-left">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchAllBody', 'searchAllResponse')">Exécuter</button>
                    </div>
                    Renvoyer tous les documents d'un index <code>POST /people/_search</code><br>
                    <pre><code class="json" id="searchAllBody">{
  "query": {
    "match_all": {}
  }
}</code></pre>
                  </li>
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/_search', 'searchAllBody', 'searchAllResponse')">Exécuter</button>
                    </div>
                    Idem (même corps de requête) mais parmi tous les index <code>POST /_search</code><br>
                    </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="searchAllResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Toutes les possibilités sur l'API <code>search</code> <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html" target="_blank">ici</a>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-rechercher-root" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Recherche stricte</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Voici quelques exemples permettant de faire des recherches strictes (il y a beaucoup d'autres syntaxes ! )
            </div>
          </div>
          <div class="container-fluid small-font text-left">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchFullTextBody0', 'searchFullTextResponse')">Exécuter</button>
                    </div>
                    Rechercher sur tous les champs<code>POST /people/_search</code><br>
                    <pre class="mb-0"><code class="json" id="searchFullTextBody0">{
  "query": {
    "query_string": { "query": "john AND Doe" }
  }
}</code></pre>
                  </li>
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchFullTextBody', 'searchFullTextResponse')">Exécuter</button>
                    </div>
                    Rechercher sur un champ avec <em>John</em> ou <em>Jane</em><code>POST /people/_search</code><br>
                    <pre class="mb-0"><code class="json" id="searchFullTextBody">{ "query": { "match": { "prenom": "John Jane" } } }</code></pre>
                  </li>
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchFullTextBody2', 'searchFullTextResponse')">Exécuter</button>
                    </div>
                    Rechercher sur plusieurs champs <code>POST /people/_search</code><br>
                    <pre class="mb-0"><code class="json" id="searchFullTextBody2">{ "query": {
    "multi_match": { 
      "fields": ["nom", "prenom"], "query": "John Villoud" 
    }
  }
}</code></pre> </code></pre>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="searchFullTextResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid little-top-margin">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Toutes les possibilités sur l'API <code>search</code> <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html" target="_blank">ici</a>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-rechercher-root-partial" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Recherche partielle</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Voici quelques exemples permettant de faire des recherches partielles (il y a d'autres syntaxes ! )
            </div>
          </div>
          <div class="container-fluid small-font text-left">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchPartialTextBody', 'searchPartialTextResponse')">Exécuter</button>
                    </div>
                    <em>Nom</em> commence par <em>do</em> <code>POST /people/_search</code><br>
                    <pre class="mb-0"><code class="json" id="searchPartialTextBody">{ "query": { "prefix": { "nom": "do" } } }</code></pre>
                  </li>
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchPartialTextBody1', 'searchPartialTextResponse')">Exécuter</button>
                    </div>
                    <em>Nom</em> contient <em>j</em> puis <em>n</em> <code>POST /people/_search</code><br>
                    <pre class="mb-0"><code class="json" id="searchPartialTextBody1">{ "query": { "wildcard": { "prenom": "j*n" } } }</code></pre>
                  </li>
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchPartialTextBody2', 'searchPartialTextResponse')">Exécuter</button>
                    </div>
                    <em>Bio</em> contient dans l'ordre <em>that I am</em> <code>POST /people/_search</code><br>
                    <pre class="mb-0"><code class="json" id="searchPartialTextBody2">{ "query": { "match_phrase": { "bio": "that I am" } } }</code></pre>
                  </li>
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchPartialTextBody3', 'searchPartialTextResponse')">Exécuter</button>
                    </div>
                    <em>Bio</em> contient <em>know a***</em> <code>POST /people/_search</code><br>
                    <pre class="mb-0"><code class="json" id="searchPartialTextBody3">{ "query": { "match_phrase_prefix": { "bio": "know a" } } }</code></pre>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="searchPartialTextResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid little-top-margin">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Attention à l'utilisation des recherches de type <code>wildcard</code> (ne jamais commencer par * ou ?) qui peuvent être peu performances lorsque la taille de l'index est importante.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-rechercher-root-flou" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Recherche floue ou par intervalle</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Le gros intérêt d'Elasticsearch est de pouvoir faire des recherches floues. Voici quelques exemples.
            </div>
          </div>
          <div class="container-fluid small-font text-left">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchFlouTextBody', 'searchFlouTextResponse')">Exécuter</button>
                    </div>
                    <em>Nom</em> ressemblant à <em>jonh</em> <code>POST /people/_search</code><br>
                    <pre class="mb-0"><code class="json" id="searchFlouTextBody">{ "query": { 
  "match": { 
    "prenom":  {"query": "jonh", "fuzziness": "AUTO" } 
} } }</code></pre> ou <pre class="mb-0"><code>{ "query": { "fuzzy": { "prenom": "jonh" } } }</code></pre>
                  </li>
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'searchFlouTextBody1', 'searchFlouTextResponse')">Exécuter</button>
                    </div>
                    Personnes nées entre le 1<sup>er</sup> janvier et le 1<sup>er</sup> février 1970 <code>POST /people/_search</code><br>
                    <pre class="mb-0"><code class="json" id="searchFlouTextBody1">{ "query": { 
  "range": { 
    "dateNaissance": {
      "gte": "01/01/1970", "lte": "01/02/1970"
    }
  } 
} }</code></pre>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="searchFlouTextResponse"></code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-rechercher-root-scen1" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Scénario 1 : Auto-complétion</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Exercice : Mettre en place une auto-complétion recherchant de manière floue sur le prénom ou le nom.
            </div>
          </div>
          <div class="container-fluid small-font text-left">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-warning" onclick="correctionExo1()">Correction</button></div>
                    Mettre <code>"%VALUE%"</code> dans votre requête pour remplacer automatiquement par la valeur saisie dans le champ.
                    <textarea id="exoAutoCompletion" class="small-font apiResponse form-control" style="width: 100%"></textarea>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                <input class="form-control" type="text" placeholder="Nom ou prénom" id="nameInputExo1" onkeyup="executeRestExo1()">
                <ul class="list-group" id="resultsExo1">
                  
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-aggregate" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Agréger</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les <strong>agrégations</strong> permettent de présenter les données regroupées selon certains champs. On parle de <strong>facettes</strong> Il est alors possible de classer et analyser les résultats retournés sous diverses formes (diagrammes...) et améliorer la navigation en indiquant clairement les filtrages possibles.
            </div>
          </div>
          <div class="container-fluid small-font little-top-margin">
            <img src="img/facettes.png">
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font little-top-margin" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Très intéressant lorsqu'on recherche parmi un catalogue de produits par exemple, ce mécanisme s'avérera également pratique dans le cadre du monitoring d'applications
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-aggregate-root" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Agrégation basique</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Voyons comment grouper des résultats en fonction des différentes valeurs d'un champ.
            </div>
          </div>
          <div class="container-fluid text-left small-font little-top-margin">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'aggregateBasicBody', 'aggregateBasicResponse')">Exécuter</button>
                    </div>
                    Afficher tous les résultats en indiquant les cardinalités pour chaque agrégat par département de naissance avec critère de taille et d'ordre <br> <code>POST /people/_search</code>
                    <pre class="mb-0"><code class="json" id="aggregateBasicBody">{ 
  "query": { "match_all": { } },
  "aggregations": {
    "departements": {
      "terms": { 
        "field": "departementNaissance",
        "size": 2,
        "order" : { "_count" : "desc" }
      }
    }
  }
}</code></pre>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="aggregateBasicResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font mt-1" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;A noter qu'on ne peut pas effectuer des agrégations <code>terms</code> pour un champ mappé en tant que <code>text</code>. Il faut qu'il soit mappé en tant que <code>keyword</code>. Toutes les informations sur l'agrégation <code>terms</code> <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/search-aggregations-bucket-terms-aggregation.html" target="_blank">ici</a>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-aggregate-root-range" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Agrégation <code>range</code></h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les agrégations de type <code>range</code> permettent de répartir les résultats en tranches par rapport à une valeur d'un champ
            </div>
          </div>
          <div class="container-fluid text-left small-font little-top-margin">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'aggregateRangeDateBody', 'aggregateRangeDateResponse')">Exécuter</button>
                    </div>
                    Afficher tous les résultats en indiquant les cardinalités pour chaque agrégat pour les tranches définies <br> <code>POST /people/_search</code>
                    <pre class="mb-0"><code class="json" id="aggregateRangeDateBody">{ 
  "query": { "match_all": { } },
  "aggregations": {
    "agg_dateN": {
      "date_range": {
        "field": "dateNaissance", "format": "yyyy",
        "ranges": [ { "from": "2000" }, 
          { "from": "1980", "to": "2000"},
          { "from": "1970", "to": "1980"}
        ]
      }
    }
  }
}</code></pre>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="aggregateRangeDateResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid mt-3">
            <div class="alert alert-primary small-font mt-1" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il est bien évidemment possible de faire des agrégations <code>range</code> pour des champs numériques classiques. Dans ce cas, remplacer <code>date_range</code> par <code>range</code> et supprimer <code>format</code>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-aggregate-root-histo" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Agrégation <code>histogram</code></h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les agrégations <code>histogram</code> suivent le même principe que les agrégations <code>range</code> mais on spécifie un taille d'intervalle au lieu de définir manuellement les tranches.
            </div>
          </div>
          <div class="container-fluid text-left small-font mt-1">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'aggregateHistoDateBody', 'aggregateHistoDateResponse')">Exécuter</button>
                    </div>
                    Afficher tous les résultats en indiquant les cardinalités pour chaque agrégat par année de naissance <br> <code>POST /people/_search</code>
                    <pre class="mb-0"><code class="json" id="aggregateHistoDateBody">{ 
  "query": { "match_all": { } },
  "aggregations": {
    "agg_dateN": {
      "date_histogram": {
        "field": "dateNaissance",
        "calendar_interval": "year",
        "format": "yyyy"
      }
    }
  }
}</code></pre>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="aggregateHistoDateResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font mt-1" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il est bien évidemment possible de faire des agrégations <code>histogram</code> pour des champs numériques classiques. Dans ce cas, remplacer <code>date_histogram</code> par <code>histogram</code>, supprimer <code>format</code> et remplacer <code>calendar_interval</code> par <code>interval</code>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-aggregate-root-filter" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Agrégation <code>filter</code></h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les agrégations <code>filter</code> permettent de regrouper les documents qui respectent les critères du filtre puis d'éventuellement appliquer d'autres agrégations sur ce sous-ensemble.
            </div>
          </div>
          <div class="container-fluid text-left small-font mt-1">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'aggregateFilterBody', 'aggregateFilterResponse')">Exécuter</button>
                    </div>
                    Afficher tous les hommes en indiquant les cardinalités pour chaque agrégat par département de naissance <br> <code>POST /people/_search</code>
                    <pre class="mb-0"><code class="json" id="aggregateFilterBody">{ 
  "query": { "match_all": { } },
  "aggregations": {
    "agg_fi": {
      "filter": { "term": { "sexe": "M" } },
      "aggs": {
        "departements": {
          "terms": { "field": "departementNaissance" }
        }
      }
    }
  }
}</code></pre>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="aggregateFilterResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font mt-1" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il est possible de définir plusieurs filtres un utilisant la syntaxe <code class="json">"filters": { "filters": [ ... ] }</code> à la place de <code>filter</code>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-aggregate-root-minmax" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Agrégation <code>min</code> <code>max</code> et <code>avg</code></h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Ces agrégations permettent respectivement de calculer la valeur minimum, maximum et moyenne pour un champ défini.
            </div>
          </div>
          <div class="container-fluid text-left small-font mt-1">
            <div class="row">
              <div class="col-6">
                <ul class="list-group">
                  <li class="list-group-item">
                    <div class="float-right"><button class="btn btn-primary" onclick="executeRest('POST', '/people/_search', 'aggregateMinMaxBody', 'aggregateMinMaxResponse')">Exécuter</button>
                    </div>
                    Afficher tous les résultats en indiquant la date de naissance minimum, maximum et moyenne <br> <code>POST /people/_search</code>
                    <pre class="mb-0"><code class="json" id="aggregateMinMaxBody">{ 
  "query": { "match_all": { } },
  "aggregations": {
    "date_min": {
      "min": { "field": "dateNaissance" }
    },
    "date_max": {
      "max": { "field": "dateNaissance" }
    },
    "date_avg": {
      "avg": { "field": "dateNaissance" }
    }
  }
}</code></pre>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                Réponse <br>
                <pre><code class="json apiResponse" id="aggregateMinMaxResponse"></code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font mt-3" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;La notion de <em>moyenne</em> aura plus de sens pour les champs de type numérique. Il est également possible d'utiliser l'agrégation <code>statistical</code> qui calcule plusieurs statistiques sur le champ défini (celles présentées ici mais également somme, écart type, variance...).
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="data" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Collecter les données</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;La recherche peut être faite sur des données très diverses (BDD, fichiers textes, sites web...). Il est donc nécessaire de collecter ces données et de transformer les informations pertinentes en documents compréhensibles par le moteur de recherche.
            </div>
          </div>
          <div class="container-fluid small-font">
            <div class="row" style="height: 500px">
              <div class="col-sm-4 big-top-margin">
                <nav class="little-top-margin">
                  <div class="nav nav-pills flex-column" id="nav-tab" role="tablist">
                    <a class="nav-item nav-link active" id="nav-identification-tab" data-toggle="tab" href="#nav-identification" role="tab" aria-controls="nav-identification" aria-selected="true">
                      Identification des données à indexer
                    </a>
                    <a class="nav-item nav-link" id="nav-transfo-tab" data-toggle="tab" href="#nav-transfo" role="tab" aria-controls="nav-transfo" aria-selected="false">
                    Transformation du sous-ensemble sélectionné en document compréhensible par le moteur de recherche
                  </a>
                  <a class="nav-item nav-link" id="nav-traitement-tab" data-toggle="tab" href="#nav-traitement" role="tab" aria-controls="nav-traitement" aria-selected="false">
                    Indexation des documents</a>
                  </div>
                </nav>
              </div>
              <div class="col-sm-8 text-left">
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="nav-identification" role="tabpanel" aria-labelledby="nav-identification-tab">
                    <div class="row">
                      <div class="col-sm-6"><code>employes.xml</code>
                        <pre><code class="xml">&lt;employes&gt;
  &lt;employe id="1"&gt;
    <span class="bg-success">&lt;nom&gt;Doe&lt;/nom&gt;</span>
    <span class="bg-success">&lt;prenom&gt;John&lt;/nom&gt;</span>
    &lt;complet&gt;John Doe&lt;/complet&gt;
    <span class="bg-success">&lt;matr&gt;C12345&lt;/matr&gt;</span>
    &lt;dipl&gt;DUT&lt;/dipl&gt;
    <span class="bg-success">&lt;emb&gt;06/05/2010&lt;/emb&gt;</span>
    &lt;comm&gt;...&lt;/comm&gt;
    <span class="bg-success">&lt;sal&gt;2450.65&lt;/sal&gt;</span>
  &lt;/employe&gt;
  ...
&lt;/employes&gt;</code></pre>
                      </div>
                      <div class="col-sm-6"><code>apache.log</code><br>
                        <code><span class="bg-success">79.210.252.187</span> - - [<span class="bg-success">29/Nov/2017:23:50:20 +0100</span>] "<span class="bg-success">GET /</span> HTTP/1.1" <span class="bg-success">200</span> 19502 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0" <span class="bg-success">443</span> "-"
...</code>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane fade" id="nav-transfo" role="tabpanel" aria-labelledby="nav-traitement-tab">
                    <div class="row big-top-margin">
                      <div class="col-sm-6">
                        <pre><code class="json">{
  prenom: "John"
  nom: "Doe",
  matricule: "C12345",
  dateEmbauche: "2010-05-06",
  salaire: 2450.65
}</code></pre>
                      </div>
                      <div class="col-sm-6">
                        <pre><code class="json">{
  ip: "79.210.252.187",
  date: "2017-11-29 23:50:20",
  statusCode: 200,
  url: "/",
  httpMethod: "GET",
  port: 443
}</code></pre>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane fade big-top-margin" id="nav-traitement" role="tabpanel" aria-labelledby="nav-transfo-tab">
                    <ul class="list-group text-center">
                      <li class="list-group-item">
                        Gestion de l'insensibilité à la casse
                      </li>
                      <li class="list-group-item">
                        Prise en compte de la phonétique
                      </li>
                      <li class="list-group-item">
                        Gestion des synonymes
                      </li>
                      <li class="list-group-item">
                        Gestion des conjugaisons et des pluriels
                      </li>
                      <li class="list-group-item">...</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font little-top-margin" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Ce n'est qu'une fois ces documents créés qu'ils pourront être <strong>indexés</strong> dans le moteur de recherche.
            </div>
          </div>
        </div>
      </div>
    </div>

   <div id="data-beats" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">La suite Beats</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong><a href="https://www.elastic.co/guide/en/beats/libbeat/current/index.html" target="_blank">Beats</a></strong> représente un ensemble de modules permettant de récupérer des données de sources diverses afin de les envoyer à votre <strong>Elasticsearch</strong>. On retrouve <strong>FileBeat</strong> permettant de gérer notamment les fichiers de logs, <strong>MetricBeat</strong> permettant de collecter des indicateurs et statistiques de machines (processeur, mémoire...) ou encore <strong>HeartBeat</strong> qui permet de surveiller la disponibilité d'applications web.
            </div>
          </div>
          <div class="container small-font ">
            <img src="img/beats-platform.png">
          </div>
          <div class="container-fluid little-top-margin">
            <div class="alert alert-primary small-font " role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Ces modules ou <strong>agents</strong> peuvent être installés sur les différentes machines de votre architecture et envoyer leur données à un ou plusieurs cluster <em>Elasticsearch</em>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="data-filebeat" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3"><code>FileBeat</code></h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong><a href="https://www.elastic.co/guide/en/beats/filebeat/current/index.html" target="_blank">FileBeat</a></strong> permet de configurer un ou plusieurs <strong>inputs</strong> correspondant aux différents types de logs que vous souhaitez gérer.
            </div>
          </div>
          <div class="container small-font ">
            <img src="img/filebeat.png" height="600px">
          </div>
          <div class="container-fluid little-top-margin">
            <div class="alert alert-primary small-font " role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Lorsque des lignes sont ajoutées dans les fichiers <em>surveillés</em> par <strong>FileBeat</strong>, ce dernier les traite et transmet automatiquement à l'<strong>ouput</strong> configuré les lignes concernées.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="data-filebeat-root" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Configuration</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Une fois les différentes étapes d'<strong><a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-getting-started.html" target="_blank">installation</a></strong> effectuées, il est nécessaire de configurer <strong>FileBeat</strong> pour lui définir son ou ses <strong>inputs</strong>, son <strong>output</strong> et les URLs de <strong>Kibana</strong> et <strong>Elasticsearch</strong>. La configuration est située dans le fichier <code>filebeat.yml</code> :
            </div>
          </div>
          <div class="container small-font text-left">
            <pre class="mb-0"><code class="yaml">#Fichier filebeat.yml
filebeat.inputs:
- type: log
  enabled: true
  paths:
    - /var/log/*.log
#============================== Elastic Cloud =====================================
cloud.id: XXX
cloud.auth: user:password
#============================== Ou Kibana =========================================
setup.kibana:
  host: "localhost:5601"
#============================== Output (un seul) ==================================
output.elasticsearch:
  hosts: ["localhost:9200"]
#output.logstash:
  #hosts: ["localhost:5044"]</code></pre>
          </div>
          <div class="container-fluid little-top-margin">
            <div class="alert alert-primary small-font " role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;On renseigne l'url de <strong>Kibana</strong> afin de permettre à <strong>FileBeat</strong> de créer des <strong>visualisations</strong> prêtes à l'emploi (notamment lorsqu'on utilise des <em>modules</em>). Pour profiter de ces visualisations, il faut utiliser l'output Elasticsearch. On peut également envoyer les données à <strong>Logstash</strong>.
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="data-filebeat-root-modules" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Modules</h1>
            <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;De nombreux <strong><a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-modules.html" target="_blank">modules</a></strong> peuvent être activés pour gérer des logs dont le format est standard (logs Apache, MySQL...).
            </div>
          </div>
          <div class="container small-font text-left">
            <code>filebeat modules enable apache</code>
            <pre class="mb-0"><code class="yaml"># Module: apache (modules.d/apache.yml ou modules.d/apache.yml.disabled si non activé)
- module: apache
  # Access logs
  access:
    enabled: true
    var.paths: ["/var/logs/apache/access_log*"]

  # Error logs
  error:
    enabled: true
    # Set custom paths for the log files. If left empty,
    # Filebeat will choose the paths depending on your OS.
    var.paths: ["/var/logs/apache/error.log*"]</code></pre>
          </div>
          <div class="container-fluid little-top-margin">
            <div class="alert alert-primary small-font " role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;La plupart des autres outils de la suite Beats fonctionnent de la même manière (fichier de configuration <code>yml</code> et modules à activer/désactiver.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="data-metricbeat" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3"><code>MetricBeat</code></h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong><a href="https://www.elastic.co/guide/en/beats/metricbeat/current/index.html" target="_blank">MetricBeat</a></strong> est un agent qui une fois installé sur les machines de votre architecture, permet d'envoyer périodiquement des métriques orientées système.
            </div>
          </div>
          <div class="container small-font ">
            <img src="img/metricbeat.png" height="600px">
          </div>
          <div class="container-fluid little-top-margin">
            <div class="alert alert-primary small-font " role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il existe le module <strong>System</strong>, mais aussi des modules pour les serveurs Web (<strong>Apache</strong>, <strong>IIS</strong>, <strong>Nginx</strong>...), les services Cloud (<strong>AWS</strong>, <strong>Google Cloud</strong>, <strong>Azure</strong>) ou encore les serveurs de base de données (<strong>PostgreSQL</strong>, <strong>MySQL</strong>...).  
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="data-heartbeat" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3"><code>HeartBeat</code></h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong><a href="https://www.elastic.co/guide/en/beats/heartbeat/current/index.html" target="_blank">HeartBeat</a></strong> est un petit programme qui s'exécute en arrière plan et ping régulièrement une ou plusieurs URLs configurées pour s'assurer que l'application web est disponible.
            </div>
          </div>
          <div class="container small-font text-left">
            <pre class="mb-0"><code class="yaml"># fichier heartbeat.yml
heartbeat.monitors:
- type: http
  # ID used to uniquely identify this monitor in elasticsearch even if the config changes
  id: mon-id
  # Human readable display name for this service in Uptime UI and elsewhere
  name: Application Dummy
  # List or urls to query
  urls: ["http://dummyapp.com/isAlive", "http://otherservice:4545/"]
  # Configure task schedule
  schedule: '@every 10s'
  # Total test connection and data exchange timeout
  #timeout: 16s
</code></pre>
          </div>
        </div>
      </div>
    </div>

    <div id="data-logstash" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Logstash</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<a href="https://www.elastic.co/guide/en/logstash/current/index.html" target="_blank">Logstash</a> a pour but de récupérer des données dont l'origine et le format sont multiples, de les parser, éventuellement les transformer pour les envoyer vers une ou plusieurs sorties.
            </div>
          </div>
          <div class="container small-font">
            <img src="img/logstash.png">
          </div>
          <div class="container-fluid little-top-margin">
            <div class="alert alert-primary small-font " role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Le cas le plus courant est la récupération et l'analyse de fichiers de logs à envoyer dans un Elasticsearch. Mais les possibilités sont bien plus étendues.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="data-logstash-root" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Configuration de Logstash</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font mb-0" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Lorsqu'on lance <strong>Logstash</strong>, il est nécessaire de spécifier un fichier de configuration déterminant les entrées, sorties et éventuels traitements à effectuer.
            </div>
          </div>
          <div class="container-fluid text-left small-font">
            <div class="row">
              <div class="col">
                <pre class="mb-0"><code># Collecte de logs Apache
input {
    file {
        path => "/var/log/apache2/access.log"
        start_position => "beginning"
    }
}
filter {
  grok {
    match => { "message" => "%{COMBINEDAPACHELOG}" }
  }
  date {
    match => [ "timestamp" , "dd/MMM/yyyy:HH:mm:ss Z" ]
  }
}
output {
    elasticsearch {
        hosts => [ "localhost:9200" ]
    }
}</code></pre>
              </div>
              <div class="col">
                  <pre><code># Collecte de logs custom
input {
    beats {
        port => "5044"
    }
}
filter {
  dissect {
    mapping => { "message" => "%{ts}-%{+ts}-%{+ts} %{level} - %{msg}" }
  }
}
output {
    elasticsearch {
        hosts => [ "localhost:9200" ]
    }
    stdout { codec => rubydebug }
}</code></pre>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class="alert alert-primary small-font " role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Nous verrons ensemble quelques exemples mais les possibilités sont infinies ! A noter que les <code>Grok filters</code> sont difficiles à configurer. Il vaut mieux les tester en utilisant un <a href="https://grokdebug.herokuapp.com/" target="_blank">debbuger</a> ou l'outil intégré à Kibana. Le <code>Dissect Filter</code> est plus facile à utiliser.
            </div>
          </div>
        </div>
      </div>
    </div>


    <div id="visualize" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Visualiser les données</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong>Kibana</strong> est une interface web permettant de consulter les données d'un cluster Elasticsearch, mais propose surtout beaucoup d'outils permettant d'analyser et de visualiser ces données. Plusieurs outils sont disponibles :
            </div>
          </div>
          <div class="container-fluid small-font text-left">
            <div class="row">
              <div class="col">
                <ul class="list-group">
              <li class="list-group-item list-group-item-info list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path class="euiIcon__fillSecondary" d="M8.33 23.67l4.79-10.55 10.55-4.79-4.79 10.55-10.55 4.79zm6.3-9l-2.28 5 5-2.28 2.28-5-5 2.28z"></path><path d="M16 0C7.163 0 0 7.163 0 16s7.163 16 16 16 16-7.163 16-16A16 16 0 0016 0zm1 29.95V28h-2v1.95A14 14 0 012.05 17H4v-2H2.05A14 14 0 0115 2.05V4h2V2.05A14 14 0 0129.95 15H28v2h1.95A14 14 0 0117 29.95z"></path></svg><span class="euiListGroupItem__label" title="Discover">&nbsp;<strong>Discover</strong></span> : Exécuter des requêtes directement dans Elasticsearch</li>
              <li class="list-group-item list-group-item-info list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path class="euiIcon__fillSecondary" d="M32 32H4a4 4 0 01-4-4V0h2v28a2 2 0 002 2h28v2z"></path><path d="M6 20h2v7H6zM16 12h2v15h-2zM26 17h2v10h-2z"></path><path d="M27 6a3 3 0 00-2.08.84L20 4.36A2.2 2.2 0 0020 4a3 3 0 00-6 0c.001.341.062.68.18 1l-5.6 4.46A3 3 0 007 9a3 3 0 103 3 2.93 2.93 0 00-.18-1l5.6-4.48A3 3 0 0017 7a3 3 0 002.08-.84l5 2.48A2.2 2.2 0 0024 9a3 3 0 103-3zM7 13a1 1 0 110-2 1 1 0 010 2zm10-8a1 1 0 110-2 1 1 0 010 2zm10 5a1 1 0 110-2 1 1 0 010 2z"></path></svg><span class="euiListGroupItem__label" title="Visualize">&nbsp;<strong>Visualize</strong></span> : Visualiser des requêtes spécifiques sous forme de graphiques</li>
              <li class="list-group-item list-group-item-info list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path d="M29 9H3a3 3 0 01-3-3V3a3 3 0 013-3h26a3 3 0 013 3v3a3 3 0 01-3 3zM3 2a1 1 0 00-1 1v3a1 1 0 001 1h26a1 1 0 001-1V3a1 1 0 00-1-1H3z"></path><path class="euiIcon__fillSecondary" d="M12 20H3a3 3 0 01-3-3v-3a3 3 0 013-3h9a3 3 0 013 3v3a3 3 0 01-3 3zm-9-7a1 1 0 00-1 1v3a1 1 0 001 1h9a1 1 0 001-1v-3a1 1 0 00-1-1H3z"></path><path d="M12 31H3a3 3 0 01-3-3v-3a3 3 0 013-3h9a3 3 0 013 3v3a3 3 0 01-3 3zm-9-7a1 1 0 00-1 1v3a1 1 0 001 1h9a1 1 0 001-1v-3a1 1 0 00-1-1H3z"></path><path class="euiIcon__fillSecondary" d="M29 31h-9a3 3 0 01-3-3V14a3 3 0 013-3h9a3 3 0 013 3v14a3 3 0 01-3 3zm-9-18a1 1 0 00-1 1v14a1 1 0 001 1h9a1 1 0 001-1V14a1 1 0 00-1-1h-9z"></path></svg><span class="euiListGroupItem__label" title="Dashboard">&nbsp;<strong>Dashboard</strong></span> : Regrouper dans un tableau de bord plusieurs visualisations</li>
              <li class="list-group-item list-group-item-info list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                  <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path class="euiIcon__fillSecondary" d="M7 17h2v7H7zM12 14h2v10h-2zM17 16h2v8h-2zM22 14h3v2h-3zM22 18h3v2h-3zM22 22h3v2h-3z"></path><path d="M30.73 24a6.47 6.47 0 01.45-2.19c.337-.9.52-1.85.54-2.81a8.55 8.55 0 00-.54-2.81 6.47 6.47 0 01-.45-2.19 9.2 9.2 0 01.62-2.49c.53-1.57 1.08-3.19.08-4.2-1-1.01-2.41-.44-3.52.05a5.59 5.59 0 01-2.09.64 5.3 5.3 0 01-.59 0L16 .28 6.77 8a5.3 5.3 0 01-.59 0 5.59 5.59 0 01-2.09-.65C3 6.87 1.6 6.25.57 7.31c-1.03 1.06-.45 2.63.08 4.2A9.2 9.2 0 011.27 14a6.47 6.47 0 01-.45 2.19A8.55 8.55 0 00.28 19c.02.96.203 1.91.54 2.81A6.47 6.47 0 011.27 24a9.2 9.2 0 01-.62 2.49c-.53 1.57-1.08 3.19-.08 4.2.353.38.852.59 1.37.58a5.67 5.67 0 002.15-.63A5.59 5.59 0 016.18 30a7.13 7.13 0 012.29.47 8 8 0 002.62.53 7.37 7.37 0 002.47-.51A7.14 7.14 0 0116 30a6.24 6.24 0 012.14.45 8 8 0 002.77.55 8.08 8.08 0 002.77-.55 6.24 6.24 0 012.14-.45 5.59 5.59 0 012.09.65c1.11.49 2.49 1.11 3.52.05 1.03-1.06.45-2.63-.08-4.2a9.2 9.2 0 01-.62-2.5zM21.17 7h-.26a8 8 0 00-2.77.55A6.24 6.24 0 0116 8a6.24 6.24 0 01-2.14-.45A8 8 0 0011.09 7h-.26L16 2.72 21.17 7zm8.89 22.27a4.42 4.42 0 01-1.34-.46 7.08 7.08 0 00-2.9-.82 8.14 8.14 0 00-2.78.55 6.13 6.13 0 01-2.13.45 6.24 6.24 0 01-2.14-.45A8 8 0 0016 28a9 9 0 00-3.08.6 5.74 5.74 0 01-1.83.4 6.36 6.36 0 01-2-.43A8.72 8.72 0 006.18 28a7.08 7.08 0 00-2.9.82 9.65 9.65 0 01-1.28.52 6.08 6.08 0 01.52-2.21c.403-1 .65-2.055.73-3.13a8.55 8.55 0 00-.54-2.81A6.47 6.47 0 012.27 19a6.47 6.47 0 01.44-2.19c.337-.9.52-1.85.54-2.81a10.48 10.48 0 00-.72-3.13 9 9 0 01-.59-2.16H2c.447.1.88.255 1.29.46a7.08 7.08 0 002.9.82A8.14 8.14 0 009 9.44 6.13 6.13 0 0111.09 9a6.13 6.13 0 012.13.45A8.14 8.14 0 0016 10a8.14 8.14 0 002.78-.55A6.13 6.13 0 0120.91 9a6.13 6.13 0 012.09.44 8.14 8.14 0 002.78.55 7.08 7.08 0 002.9-.82A9.65 9.65 0 0130 8.66a6.08 6.08 0 01-.52 2.21c-.403 1-.65 2.055-.73 3.13.02.96.203 1.91.54 2.81a6.47 6.47 0 01.44 2.19 6.47 6.47 0 01-.44 2.19 8.55 8.55 0 00-.54 2.81c.078 1.074.32 2.13.72 3.13a9 9 0 01.59 2.16v-.02z"></path></svg><span class="euiListGroupItem__label" title="Canvas">&nbsp;<strong>Canvas</strong></span> : Idem que <em>Dashboard</em> mais axé sur la présentation</li>
              <li class="list-group-item list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path class="euiIcon__fillSecondary" d="M29.014 23.89l2.296 1.145L16 32.101.53 24.961l2.49-1.056 2.453 1.132-.003.002L16 29.899l10.69-4.934-.003-.001 2.327-1.074zm-4.972-7.482l7.268 3.627L16 27.101.53 19.961l7.668-3.252c.392.486.838 1.02 1.34 1.604L5.47 20.039 16 24.899l10.69-4.934-3.954-1.973c.493-.58.928-1.107 1.306-1.584z"></path><path d="M18 9a2 2 0 10-4 0 2 2 0 004 0zm2 0a4 4 0 11-8 0 4 4 0 018 0zm-3.268 12.681l-.732.787-.732-.787c-3.557-3.824-5.817-6.462-6.81-7.96A8.746 8.746 0 017 8.875C7 3.97 11.033 0 16 0s9 3.97 9 8.875a8.746 8.746 0 01-1.459 4.846c-.992 1.498-3.252 4.136-6.809 7.96zm5.142-9.064A6.747 6.747 0 0023 8.875C23 5.081 19.87 2 16 2S9 5.081 9 8.875c0 1.349.394 2.636 1.126 3.742.846 1.277 2.812 3.593 5.874 6.912 3.062-3.32 5.028-5.635 5.874-6.912z"></path></svg><span class="euiListGroupItem__label" title="Maps">&nbsp;<strong>Maps</strong> : Visualisation de données comportant des éléments géospatiaux</span></li>
              <li class="list-group-item list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path class="euiIcon__fillSecondary" d="M10 18v.56a1 1 0 01-.68.95L3 21.61V10a1 1 0 01.4-.8l3.2-2.4-1.2-1.6-3.2 2.4A3 3 0 001 10v12a3 3 0 001.2 2.4l3.2 2.4 1.2-1.6-2.47-1.85 5.82-1.95A3 3 0 0012 18.56V18h-2zM29.8 7.6l-3.2-2.4-1.2 1.6 3.2 2.4a1 1 0 01.4.8v11.61l-6.32-2.11a1 1 0 01-.68-.95V18h-2v.56a3 3 0 002.05 2.85l5.82 1.94-2.47 1.85 1.2 1.6 3.2-2.4A3 3 0 0031 22V10a3 3 0 00-1.2-2.4z"></path><path d="M11 6A3 3 0 018.88.88a3.07 3.07 0 014.24 0A3 3 0 0111 6zm0-4a1 1 0 10-.012 2A1 1 0 0011 2zm0 30a3 3 0 01-2.12-5.12 3.07 3.07 0 014.24 0A3 3 0 0111 32zm0-4a1 1 0 10-.012 2A1 1 0 0011 28zm0-12a3 3 0 01-2.12-5.12 3.07 3.07 0 014.24 0A3 3 0 0111 16zm0-4a1 1 0 10-.012 2A1 1 0 0011 12zm10-6A3 3 0 0118.88.88a3.07 3.07 0 014.24 0A3 3 0 0121 6zm0-4a1 1 0 10-.012 2A1 1 0 0021 2zm0 30a3 3 0 01-2.12-5.12 3.07 3.07 0 014.24 0A3 3 0 0121 32zm0-4a1 1 0 10-.012 2A1 1 0 0021 28zm0-12a3 3 0 01-2.12-5.12 3.07 3.07 0 014.24 0A3 3 0 0121 16zm0-4a1 1 0 10-.012 2A1 1 0 0021 12z"></path></svg><span class="euiListGroupItem__label" title="Machine Learning">&nbsp;<strong>Machine Learning</strong></span> : Modélise le fonctionnement <em>normal</em> de l'application</li>
              <li class="list-group-item list-group-item-info list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path d="M30 19.092v12.88H2v-5.386l6.747-6.747.708.708c.236.236.48.463.733.68L4 27.414v2.558h24v-8.91c.186-.166.369-.339.546-.516L30 19.092zm-20.85-3.19A10.955 10.955 0 018 11C8 4.925 12.925 0 19 0s11 4.925 11 11c0 1.76-.414 3.425-1.15 4.9l-1.51-1.51A8.973 8.973 0 0028 11a9 9 0 10-17.34 3.391l-1.51 1.51z"></path><path class="euiIcon__fillSecondary" d="M19 20a8.96 8.96 0 005.618-1.968l-4.202-4.204a2 2 0 00-2.828 0l-4.205 4.205A8.96 8.96 0 0019 20zm-2.826-7.586a4 4 0 015.656 0l5.656 5.657-.707.707A10.967 10.967 0 0119 22a10.967 10.967 0 01-7.778-3.221l-.707-.707 5.659-5.658z"></path></svg><span class="euiListGroupItem__label" title="Metrics">&nbsp;<strong>Metrics</strong></span> : Visualise les logs et métriques techniques de l'infrastructure </li><li class="list-group-item list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path d="M1 8c3.983 0 7.732 1.013 11.001 2.797v2.312A20.887 20.887 0 002 10.023v11.025c4.85.462 9.27 4.183 9.955 8.691l.035.261H12v2h-1.938l-.018-1.236c-.116-4.015-4.336-7.631-8.793-7.76L0 22.986V8h1zm13-8h1c9.28 0 16.825 7.437 16.997 16.677L32 17v15h-2V17c0-7.84-6.014-14.274-13.68-14.943L16 2.033v7.681l-2-1.143V0h1-1z"></path><path class="euiIcon__fillSecondary" d="M26.997 30.636L27.009 32H14V11.305l1.483.82c6.994 3.861 11.382 10.735 11.514 18.51zm-2.048-1.04C24.505 23.556 21.205 18.2 16 14.771V30h8.974l-.025-.404z"></path></svg><span class="euiListGroupItem__label" title="Logs">&nbsp;<strong>Logs</strong></span> : Facilite la consultation des logs collectés ou agrégés</li>
                </ul>
              </div> 
              <div class="col">
                <ul class="list-group">
                      <li class="list-group-item list-group-item-info list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path d="M3 10h4v2H1V1h30v6h-2V3H3v7zm26 19v-6h2v8H18v-8h2v6h9z"></path><path class="euiIcon__fillSecondary" d="M31 10H9v11h12c5.523 0 10-4.477 10-10v-1zm-10 9H11v-7h17.938A8.001 8.001 0 0121 19z"></path></svg><span class="euiListGroupItem__label" title="APM">&nbsp;<strong>APM</strong> : Surveillance des performances applicatives </span></li><li class="list-group-item list-group-item-info list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path class="euiIcon__fillSecondary" d="M4.216 12.377A10.948 10.948 0 002.181 17H.153a12.941 12.941 0 012.693-6.118l1.37 1.495zm2.948-2.703l-1.37-1.495A12.94 12.94 0 0113 6v2c-2.144 0-4.144.613-5.836 1.674z"></path><path d="M26 4.414V19c0 7.18-5.82 13-13 13C6.5 32 1.115 27.23.153 21H2.18c.94 5.12 5.427 9 10.819 9 6.075 0 11-4.925 11-11V4.414l-4.293 4.293-1.414-1.414L25 .586l6.707 6.707-1.414 1.414L26 4.414zm-7.836 9.909l1.472 1.354-7.577 8.235-4.835-4.442 1.353-1.473 3.364 3.09 6.223-6.764z"></path></svg><span class="euiListGroupItem__label" title="Uptime">&nbsp;<strong>Uptime</strong></span> : Surveillance de la disponibilité des services</li><li class="list-group-item list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path class="euiIcon__fillSecondary" d="M24 20a4 4 0 110-8 4 4 0 010 8zm0-6a2 2 0 100 4 2 2 0 000-4zm-8.2-5.62A4 4 0 1118 1.06a4 4 0 01-2.2 7.32zm0-6a2 2 0 10.01 0h-.01zm.01 29.24a4 4 0 11-.083-8 4 4 0 01.083 8zm0-6a2 2 0 10.39 0 2 2 0 00-.4 0h.01z"></path><path d="M18 17v-2h-6.14a4 4 0 00-.86-1.64l2.31-3.44-1.68-1.12-2.31 3.44A4 4 0 008 12a4 4 0 100 8 4 4 0 001.32-.24l2.31 3.44 1.66-1.12L11 18.64a4 4 0 00.86-1.64H18zM6 16a2 2 0 114 0 2 2 0 01-4 0z"></path></svg><span class="euiListGroupItem__label" title="Graph">&nbsp;<strong>Graph</strong></span> : Mises en relation pertinentes des données </li><li class="list-group-item list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path d="M10 12c5.43 0 9.848 4.327 9.996 9.72L20 22v1h-9v9h-1C4.477 32 0 27.523 0 22s4.477-10 10-10zm-1 9v-6.938a8.001 8.001 0 00-.25 15.84l.25.036V14.062 21zm2-6.938V21h6.938a8.005 8.005 0 00-6.68-6.902l-.257-.036z"></path><path class="euiIcon__fillSecondary" d="M10 6c8.731 0 15.83 6.994 15.997 15.685L26 22h-2c0-7.628-6.1-13.83-13.687-13.997L10 8V6zm0-6c12.029 0 21.803 9.654 21.997 21.636L32 22h-2c0-10.93-8.769-19.813-19.656-19.997L10 2V0z"></path></svg><span class="euiListGroupItem__label" title="SIEM">&nbsp;<strong>SIEM</strong></span> : Visualisation de métriques axées sur la sécurité</li><li class="list-group-item list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path d="M21 28h-2v-8.49l.6-.26A9 9 0 0021 3.52V11H11V3.52a9 9 0 001.4 15.73l.6.26V28h-2v-7.21A11 11 0 0111.6.92L13 .31V9h6V.31l1.4.61a11 11 0 01.6 19.87V28z"></path><path class="euiIcon__fillSecondary" d="M11 30h10v2H11z"></path></svg><span class="euiListGroupItem__label" title="Dev Tools">&nbsp;<strong>Dev Tools</strong></span> : Client REST Elasticsearch, debugger...</li><li class="list-group-item list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path d="M1.81 15.19A8.94 8.94 0 0115.62 3.86l.38.42.38-.42a8.94 8.94 0 0114.26 10.68l-1.7-1.07a6.94 6.94 0 00-11.07-8.28L16 7.29l-1.87-2.1A6.94 6.94 0 003.41 14l-1.6 1.19zM16 31.18l-7.74-8.51 1.48-1.34L16 28.21l6.26-6.88 1.48 1.34z"></path><path class="euiIcon__fillSecondary" d="M16.16 23.29l-4.1-7.17L10.62 19H0v-2h9.38l2.56-5.12 3.9 6.83 4.13-10.32L23.66 17H32v2h-9.66l-2.31-5.39z"></path></svg><span class="euiListGroupItem__label" title="Stack Monitoring">&nbsp;<strong>Stack Monitoring</strong></span> : Surveillance des services ELK</li><li class="list-group-item list-group-item--small list-group-item-isClickable euiNavDrawerGroup__item">
                <svg width="30" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiIcon--app euiIcon-isLoaded euiListGroupItem__icon" focusable="false" role="img" aria-hidden="true"><path class="euiIcon__fillSecondary" d="M16 21a5 5 0 110-10 5 5 0 010 10zm0-8a3 3 0 100 6 3 3 0 000-6z"></path><path d="M20 32h-8v-4.06a1 1 0 00-1.61-.67l-2.88 2.87-5.65-5.65 2.87-2.87a.92.92 0 00.2-1 .93.93 0 00-.86-.6H0V12h4.06a.92.92 0 00.85-.58.94.94 0 00-.19-1L1.86 7.51l5.65-5.65 2.87 2.87A1 1 0 0012 4.06V0h8v4.06a1 1 0 001.61.67l2.87-2.87 5.66 5.66-2.87 2.87a.92.92 0 00-.2 1 .93.93 0 00.86.6H32v8h-4.06a.92.92 0 00-.85.58.94.94 0 00.19 1l2.87 2.87-5.66 5.66-2.87-2.87a1 1 0 00-1.61.67L20 32zm-6-2h4v-2.06a3 3 0 015-2.08l1.46 1.46 2.83-2.83L25.86 23a3 3 0 012.08-5H30v-4h-2.06a3 3 0 01-2.08-5l1.46-1.46-2.83-2.85L23 6.14a3 3 0 01-5-2.08V2h-4v2.06a3 3 0 01-5 2.08L7.51 4.69 4.69 7.51 6.14 9a3 3 0 01-2.08 5H2v4h2.06a3 3 0 012.08 5l-1.45 1.49 2.83 2.83L9 25.86a3 3 0 015 2.08V30z"></path></svg><span class="euiListGroupItem__label" title="Management">&nbsp;<strong>Management</strong> : Paramétrage de Kibana</span></li>
                </ul>
              </div> 
            </div>
          </div>
          <div class="container-fluid little-top-margin">
            <div class="alert alert-primary small-font " role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Nous évoquerons globalement <span class="text-info">ces outils</span> et particulièrement <strong>Visualize</strong>.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="visualize-discover" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Discover</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong>Discover</strong> permet l'exécution de recherches avec la syntaxe <code>KQL</code> ou <code>Apache Lucene</code>.
            </div>
          </div>
          <div class="container-fluid small-font">
            <img src="img/discover.PNG" style="width: 100%">
          </div>
        </div>
      </div>
    </div>

    <div id="visualize-discover-root" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Données de test</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Quelques données de test aléatoires à indexer pour pouvoir travailler sur des visualisations.
            </div>
          </div>
          <div class="container-fluid small-font">
            <button class="btn btn-primary float-right" id="generateData">Générer</button>
            <textarea id="testData" class="small-font form-control" style="height: 50vH; width: 100%"></textarea>
          </div>
        </div>
      </div>
    </div>

    <div id="visualize-canvas" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Canvas</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong>Canvas</strong> permet d'afficher des représentations simples des données, souvent fonctionnelles plutôt que techniques, donc plutôt à destination des clients. Ces écrans peuvent être exportés sous forme de rapport ou sur un site Internet (c'est le cas ici).
            </div>
          </div>
          <div style="height: 70vh" class="container small-font">
            <div kbn-canvas-shareable="canvas" kbn-canvas-url="js/canvas-embed-workpad-People-workpad-288e4365-ad20-43bb-9d67-448bdf3be410.json"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="visualize-visualize" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Visualize</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong>Visualize</strong> permet de représenter les données sous forme d'<strong>histogrammes</strong>, de <strong>courbes</strong>, de <strong>jauges</strong> afin des les rendre plus accessibles.
            </div>
          </div>
          <div class="container-fluid small-font">
            <img src="img/visualization.PNG">
          </div>
        </div>
      </div>
    </div>


    <div id="visualize-visualize-root" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Paramétrage</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Après avoir choisi le type de visualisation et la source de données (typiquement un ou plusieurs index), il faut configurer la visualisation. Dans l'onglet <strong>Data</strong>, on retrouve deux sections : <strong>Metrics</strong> et <strong>Buckets</strong>
            </div>
          </div>
          <div class="container-fluid small-font">
            <div class="row">
              <div class="col-4">
                <img src="img/visualizeMetrics.PNG">

                <p><strong>Metrics</strong> permet de définir quelles sont les informations qui seront affichées sur la visualisation.</p>
                <p><strong>Buckets</strong> permet de définir comment on regroupe les données. On peut définir plusieurs séries (<em>Split series</em>) pour un diagramme et/ou avoir un diagramme pour chaque groupement (<em>Split chart</em>)</p>
              </div>
              <div class="col-8">
                <img src="img/visualizeBuckets.PNG">
              </div>
            </div>
          </div>
          <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;La visualisation peut être sauvegardée et insérée dans un <strong>Dashboard</strong>.
            </div>
        </div>
      </div>
    </div>

    <div id="visualize-dashboard" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Dashboard</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Outre le fait de regrouper des visualisations, le gros intérêt des <strong>dashboards</strong> est de pouvoir appliquer des filtres qui s'appliqueront automatiquement aux visualisations. De plus si l'on clique sur une série ou que l'on sélectionne une partie d'une visualisation, les documents sélectionnés seront automatiquement filtrés sur les autres visualisations.
            </div>
          </div>
          <div class="container-fluid small-font">
            <img src="img/dashboard.PNG" style="width: 100%">
          </div>
          <div class="alert alert-primary small-font little-top-margin" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les dashboards peuvent également être mis à jour périodiquement.
            </div>
        </div>
      </div>
    </div>

    <div id="visualize-metrics" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Metrics</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong>Metrics</strong> permet d'afficher les données issues de <strong>MetricBeat</strong>
            </div>
          </div>
          <div class="container-fluid small-font">
            <img src="img/metrics.PNG" style="height: 55vh">
          </div>
          <div class="alert alert-primary small-font little-top-margin" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;De nombreux <strong>dashboard</strong> spécialisés sont également disponibles avec <strong>Metricbeat</strong> et ses différents modules.
            </div>
        </div>
      </div>
    </div>

    <div id="visualize-apm" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">APM</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong>APM</strong> est un ensemble d'outils de monitoring à adjoindre à votre application (Java, NodeJS, .NET, Ruby et bien d'autres) qui permet de récupérer en temps réel des métriques spécifiques à votre application.
            </div>
          </div>
          <div class="container-fluid small-font">
            <img src="img/apm.PNG" style="height: 59vh">
          </div>
          <div class="alert alert-primary small-font little-top-margin" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;Toutes les précisions pour configurer <strong>APM</strong> pour Java <a href="https://www.elastic.co/guide/en/apm/agent/java/1.x/setup.html" target="_blank">ici</a> ou directement sur APM.
            </div>
        </div>
      </div>
    </div>

    <div id="visualize-uptime" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Uptime</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;<strong>Uptime</strong> est une interface permettant de collecter les données envoyées par <strong>HeartBeat</strong>.
            </div>
          </div>
          <div class="container-fluid small-font">
            <img src="img/uptime.PNG" style="width: 100%">
          </div>
        </div>
      </div>
    </div>

    <div id="toconclude" class="step slide">
      <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid text-center">
          <h1 class="display-3">Conclusion</h1>
          <div class="container-fluid">
            <div class="alert alert-primary small-font" role="alert">
                <i class="fa fa-icon fa-info-circle"></i>&nbsp;La suite <strong>Elastic</strong> permet de mettre en place relativement simplement un système complet, performant et scalable de surveillance technique et fonctionnel de vos applications afin de prévenir des éventuels problèmes ou de réagir rapidement et efficacement lorsqu'ils surviennent.
            </div>
          </div>
          <div class="container-fluid small-font">
            <img src="img/elastic.PNG" style="height: 50vh">
          </div>
        </div>
      </div>
    </div>
</div>

<script src="js/impress.js"></script>
<script src="js/jquery.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-4-navbar.js"></script>
<script src="js/highlight.min.js"></script>
<script src="js/yaml.min.js"></script>
<script src="js/moment.min.js"></script>
<script src="js/mark.min.js"></script>
<script src="js/faker.min.js"></script>
<script src="js/kbn_canvas.js"></script>
<script src="js/script.js"></script>
<script src="js/search.js"></script>

